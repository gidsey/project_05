<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>MyJournal</title>
        <link href="https://fonts.googleapis.com/css?family=Cousine:400" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Work+Sans:600" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="/static/css/normalize.css">
        <link rel="stylesheet" href="/static/css/site.css">
    </head>
    <body>
        <header>
            <div class="container">
                <div class="site-header">
                    <div class="nav">
                    <div class="flash">
                    <!-- Flash messages -->
                     {% with messages = get_flashed_messages(with_categories=True) %}
                         {% if messages %}
                             {% for category, message in messages %}
                            <div class="notification {{category}}">{{ message }}</div>
                            {% endfor %}
                        {% endif %}
                    {% endwith %}
                    </div>       
                    <!-- Log in/Log out -->
                    {% if current_user.is_authenticated %}
                    Welcome {{ current_user.username }}
                    <a href="{{ url_for('logout') }}">LOG OUT</a>
                    {% else %}
                    <a href="{{ url_for('login') }}">LOG IN</a> |
                    <a href="{{ url_for('register') }}">SIGN UP</a>
                    {% endif %}
                    </div>
                    <a class="logo" href="{{ url_for('index') }}"><i class="material-icons">library_books</i></a>
                    <a class="button icon-right" href="{{ url_for('new') }}"><span>New Entry</span> <i class="material-icons">add</i></a>
                </div>
            </div>
        </header>
        <section>
            <div class="container">
                <div class="edit-entry">
                    <h2>Edit Entry</h2>
                    {% for item in entry %}
                        {% if current_user == item.username %}
                            <form method='POST' action=''>
                                {{ form.hidden_tag() }}
                                <label for="title"> Title</label>
                                <input id="title" type="text" name="title" value="{{ item.title }}"><br>
                                <label for="date">Date</label>
                                <input id="date" type="date" name="date" value="{{ item.date }}"><br>
                                <label for="time-spent"> Time Spent</label>
                                <input id="time-spent" type="text" name="timeSpent" value="{{ item.timeSpent }}"><br>
                                <label for="what-i-learned">What I Learned</label>
                                <textarea id="what-i-learned" rows="5" name="whatILearned">{{ item.whatILearned }}</textarea>
                                <label for="resources-to-remember">Resources to Remember</label>
                                <textarea id="resources-to-remember" rows="5" name="ResourcesToRemember">{{ item.resourcesToRemember }}</textarea>
                                <input type="submit" value="Update" class="button">
                                <a href="#" class="button button-secondary">Cancel</a>
                            </form>
                        {% else %}
                        <p>Forbidden. Entries can only be edited by thier author.</p>
                        <p><a href="{{ url_for('index') }}">Back to homepage</a></p>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </section>
        <footer>
            <div>
                &copy; MyJournal
            </div>
        </footer>
    </body>
</html>